import _ from 'lodash';
import { type } from '../../../utils';
import { DataComponent } from '../data';
import CultureInfo from './cultureInfo';

export default function CultureInfoComponent(dataComponent) {
    type.check(dataComponent, DataComponent);

    var cultureInfos = {};

    return type.create(CultureInfoComponent, {
        getByCode(code) {
            if (!cultureInfos[code]) {
                var cultureInfoData = _.get(dataComponent.getCultureInfos(), [code], null);
                if (cultureInfoData) {
                    cultureInfos[code] = CultureInfo(cultureInfoData);
                }
            }

            return cultureInfos[code] || null;
        },
    });
}
