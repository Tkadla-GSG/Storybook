import _ from 'lodash';
import Culture from './culture';

export default function parseCultures(culturesData) {
    if (!_.isArray(culturesData)) {
        throw new TypeError('Expected the culturesData to be an array.');
    }

    var cultures = _.transform(culturesData, (cs, c) => {
        if (!_.isUndefined(cs[c.code])) {
            throw new Error('Duplicit culture definition: ' + c.code);
        }

        cs[c.code] = Culture(c);
    }, {});

    return Object.freeze(cultures);
}
