import _ from 'lodash';
import store from 'store';
import { type } from '../utils';

export default function LocalStorageComponent({ prefix = '' }) {
    return type.create(LocalStorageComponent, {
        set(key, value) {
            store.set(prefixKey(key), value);
        },

        get(key) {
            return store.get(prefixKey(key));
        },

        remove(key) {
            store.remove(prefixKey(key));
        },
    });

    function prefixKey(key) {
        return _.isEmpty(prefix) ? key : `${prefix}.${key}`;
    }
}
