import React from 'react';
import { localizationPropTypes } from './propTypes';

class LocalizedDate extends React.Component {
    static contextTypes = {
        localization: localizationPropTypes,
    }

    componentDidMount() {
        this.unsubscribe = this.context.localization.subscribe(() => this.forceUpdate());
    }

    componentWillUnmount() {
        this.unsubscribe();
    }

    render() {
        const { date, ...other } = this.props;

        if (!date) {
            return null;
        }

        const localizedDate = this.context.localization.localizeDate(date);

        return (
            <span {...other}>{localizedDate}</span>
        );
    }
}

export default LocalizedDate;
