'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = LocalizationComponent;

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

var _utils = require('../../../utils');

var _languages = require('../languages');

var _cultures = require('../cultures');

var _localization = require('./localization');

var _localization2 = _interopRequireDefault(_localization);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function LocalizationComponent(languageComponent, cultureComponent) {
    _utils.type.check(languageComponent, _languages.LanguageComponent);
    _utils.type.check(cultureComponent, _cultures.CultureComponent);

    return _utils.type.create(LocalizationComponent, {
        create: create,
        getDefault: function getDefault() {
            return create(languageComponent.getDefault().getCode());
        }
    });

    function create(languageCode, cultureCode) {
        if (_lodash2.default.isEmpty(languageCode)) {
            throw new Error('Expected the languageCode to be non-empty.');
        }

        var language = languageComponent.getByCode(languageCode);
        if (_lodash2.default.isNull(language)) {
            throw new Error('There is no language for the languageCode: ' + languageCode);
        }

        var finalCultureCode = cultureCode || languageCode;
        var culture = cultureComponent.getByCode(finalCultureCode);
        if (_lodash2.default.isNull(culture)) {
            throw new Error('There is no culture for the cultureCode: ' + finalCultureCode);
        }

        return (0, _localization2.default)(language, culture);
    }
}